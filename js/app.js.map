{"version":3,"sources":["app/js/actions/SearchActions.js","app/js/app.js","app/js/components/SearchApp.js","app/js/components/SearchBox.js","app/js/components/SearchResults.js","app/js/constants/SearchConstants.js","app/js/dispatcher/AppDispatcher.js","app/js/services/SearchService.js","app/js/stores/SearchStore.js"],"names":[],"mappings":"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","file":"public/js/app.js","sourcesContent":["var SearchConstants = require('../constants/SearchConstants'),\n    AppDispatcher   = require('../dispatcher/AppDispatcher'),\n    SearchService   = require('../services/SearchService');\n\n// Do not query too much backend\nconst THROTTLE_DELAY = 500;\nvar debouncedReposQuery = _.debounce(SearchService.reposQuery, THROTTLE_DELAY);\n\nvar SearchActions = {\n\n  query : (text) => {\n\n    AppDispatcher.dispatch({\n      actionType: SearchConstants.SEARCH_BEGIN,\n      text: text\n    });\n\n    debouncedReposQuery(text);\n\n  },\n\n  receiveResults : (results) => {\n\n    AppDispatcher.dispatch({\n      actionType: SearchConstants.SEARCH_SUCCESS,\n      results: results\n    });\n\n  },\n\n  receiveError : (error) => {\n\n    AppDispatcher.dispatch({\n      actionType: SearchConstants.SEARCH_FAILURE,\n      error: error\n    });\n\n  },\n\n};\n\nmodule.exports = SearchActions;\n","var SearchApp = require('./components/SearchApp');\n\nReact.render(\n  /* jshint ignore:start */\n  <SearchApp />,\n  /* jshint ignore:end */\n  document.body\n);\n","var SearchBox     = require('./SearchBox'),\n    SearchResults = require('./SearchResults'),\n    SearchStore   = require('../stores/SearchStore'),\n    SearchActions = require('../actions/SearchActions');\n\nclass App extends React.Component {\n\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      results: SearchStore.getResults()\n    };\n    this._onChange = this._onChange.bind(this);\n  }\n\n  componentDidMount () {\n    SearchStore.addChangeListener(this._onChange);\n  }\n\n  componentWillUnmount () {\n    SearchStore.removeChangeListener(this._onChange);\n  }\n\n  _onChange () {\n    this.setState({\n      results: SearchStore.getResults()\n    });\n  }\n\n  _onInput (event) {\n    SearchActions.query(event.target.value);\n  }\n\n  render(){\n\n  /* jshint ignore:start */\n    return (\n      <div className=\"layout\">\n        <div className=\"sidebar\">\n          <form className=\"pure-form l-box\">\n            <SearchBox onChange={this._onInput} />\n          </form>\n        </div>\n        <SearchResults results={this.state.results} />\n      </div>\n    );\n  /* jshint ignore:end */\n\n  }\n\n}\n\nmodule.exports = App;\n","class SearchBox extends React.Component {\n\n  render () {\n    /* jshint ignore:start */\n    return <input\n        type=\"text\"\n        ref=\"searchInput\"\n        placeholder=\"Type user pseudo\"\n        onChange={this.props.onChange}\n      />;\n    /* jshint ignore:end */\n  }\n}\n\nmodule.exports = SearchBox;\n","class SearchResults extends React.Component {\n\n  render () {\n\n    // Do not render if no results\n    if (Object.keys(this.props.results).length < 1) {\n      return null;\n    }\n\n    var items = _.map(this.props.results, function(result) {\n\n      /* jshint ignore:start */\n      return (\n        <li className=\"pure-menu-item\" key={result.id}>\n          <a href={result.html_url} className=\"pure-menu-link pure-g\">\n            <span className=\"pure-u-1-4 emphasise\">{result.name}</span>\n            <span className=\"pure-u-3-4\">{result.description}</span>\n          </a>\n        </li>\n      );\n      /* jshint ignore:end */\n    });\n\n    /* jshint ignore:start */\n    return (\n      <ul className=\"pure-menu-list\">{items}</ul>\n    );\n    /* jshint ignore:end */\n  }\n}\n\nmodule.exports = SearchResults;\n","module.exports = {\n  SEARCH_BEGIN: Symbol(),\n  SEARCH_SUCCESS: Symbol(),\n  SEARCH_FAILURE: Symbol() \n};\n","module.exports = new Flux.Dispatcher();\n","const USER_URL = (user) => `https://api.github.com/users/${user}/repos`;\n\nmodule.exports = {\n\n  reposQuery: (text) => {\n\n    // circular dependencies not handled by brunch.io :-|\n    let SearchActions = require('../actions/SearchActions');\n\n    $.get(USER_URL(text))\n\n      .done(SearchActions.receiveResults)\n\n      .fail((err) => {\n\n        if (err.status === 404)Â {\n          return SearchActions.receiveResults([]);\n        }\n\n        SearchActions.receiveError(err);\n\n      })\n\n    ;\n\n  }\n\n};\n","var AppDispatcher   = require('../dispatcher/AppDispatcher'),\n    SearchConstants = require('../constants/SearchConstants');\n\nclass Store extends EventEmitter2 {\n\n  constructor (...args) {\n    super(...args);\n    this.results = {};\n  }\n\n  emitChange () {\n    this.emit('change');\n  }\n\n  reset () {\n    this.results = {};\n    return this;\n  }\n\n  createResult (item) {\n    let id = (+new Date() + Math.floor(Math.random() * 999999)).toString(36);\n    this.results[id] = item;\n  }\n\n  getResults () {\n    return this.results;\n  }\n\n  setResults (list) {\n    this.reset();\n    _.each(list, (item) => {\n      this.createResult(item);\n    });\n    return this;\n  }\n\n  addChangeListener (callback) {\n    this.on('change', callback);\n  }\n\n  removeChangeListener (callback) {\n    this.removeListener('change', callback);\n  }\n\n}\n\nvar SearchStore = new Store();\n\nAppDispatcher.register((action) => {\n\n  let text;\n\n  switch (action.actionType) {\n\n    case SearchConstants.SEARCH_SUCCESS:\n      SearchStore.setResults(action.results).emitChange();\n      break;\n\n    case SearchConstants.SEARCH_FAILURE:\n      SearchStore.reset().emitChange();\n      break;\n\n  }\n\n});\n\nmodule.exports = SearchStore;\n"]}